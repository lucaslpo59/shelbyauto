<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShelbyAuto</title>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        body {
            background-color: #272727;
        }

        header {
            position: absolute;
            z-index: 1;
            width: 100%;
            height: 10px;
            margin-top: -25px;
            background-color: #f80000;
            -webkit-transition: all 0.3s ease-in-out 0s;
            -moz-transition: all 0.3s ease-in-out 0s;
            -o-transition: all 0.3s ease-in-out 0s;
            transition: all 0.3s ease-in-out 0s;
        }

        .navbar {
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            background-color: #fff;
        }

        .products {
            margin-top: 120px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .products-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            /* Mantém os carros centralizados */
            align-items: center;
        }

        .product-item {
            display: flex;
            align-items: center;
            background: #fff;
            width: 1200px;
            height: 550px;
            border-radius: 8px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            cursor: pointer;
            position: relative;
            margin-left: 100px;
            /* 🟢 Centraliza automaticamente sem problemas em telas menores */
        }


        .product-item:hover {
            transform: scale(1.05);
        }

        .product-info {
            padding-left: 15px;
            flex-grow: 1;
        }

        .specifications,
        .documentation {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            flex-grow: 1;
            max-width: 300px;
        }

        .specifications h5,
        .documentation h5 {
            margin-bottom: 5px;
        }

        .product-content {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        .legalizado {
            color: green;
            font-weight: bold;
        }

        .nao-legalizado {
            color: red;
            font-weight: bold;
        }

        .nao-vendido {
            color: green;
            font-weight: bold;
        }

        .vendido {
            color: red;
            font-weight: bold;
        }


        .carousel {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 500px;
            height: 500px;
            overflow: hidden;
            border-radius: 8px;
        }

        .carousel-images {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .carousel img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .carousel img.active {
            opacity: 1;
        }

        .carousel-prev,
        .carousel-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            font-size: 18px;
            padding: 5px 10px;
            cursor: pointer;
            z-index: 10;
        }

        .carousel-prev {
            left: 5px;
        }

        .carousel-next {
            right: 5px;
        }


        footer {
            background-color: #1a1a1a;
            color: #ffffff;
            padding: 11px 0;
            text-align: center;
            font-size: 14px;
            position: relative;
            bottom: 0;
            width: 100%;
            font-weight: bold;
            /* Deixa todo o texto em negrito */
        }

        footer .inner-content {
            padding: 34px 0;
            color: #ffffff;
            font-weight: bold;
            /* Texto em negrito */
        }

        footer a {
            color: #ff0000;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }

        .p2 {
            margin-bottom: 0px;
            font-size: 14px;
            font-weight: 300;
            color: #ffffff;
            line-height: 24px;
            font-weight: bold;
            /* Deixa todo o texto em negrito */
            font-weight: bold;
            /* Texto em negrito */
        }

        footer a:hover {
            color: #ffffff;
            text-decoration: underline;
        }

        hr {
            border: none;
            width: 210px;
            height: 2px;
            background-color: #222222;
            margin: 0px 0;
        }

        /* 🔹 Botão moderno */
        .form-btn {
            background: linear-gradient(90deg, #2fedc4, #56CCF2);
            /* Azul gradiente */
            color: rgb(58, 58, 58);
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
            display: inline-block;
            text-align: center;
        }

        /* 🔹 Efeito ao passar o mouse */
        .form-btn:hover {
            background: linear-gradient(90deg, #1E68D1, #4DB8E6);
            transform: scale(1.05);
        }

        .upload-container {
    display: flex;
    align-items: center;
    gap: 10px;
    background: #f8f9fa;
    padding: 12px;
    border-radius: 10px;
    border: 2px solid #ccc;
    width: 100%;
    max-width: 400px;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
}

.upload-label {
    display: flex;
    align-items: center;
    gap: 8px;
    background: #007bff;
    color: white;
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s ease;
    font-size: 14px;
}

.upload-label:hover {
    background: #0056b3;
}

.upload-label i {
    font-size: 18px;
}

.upload-input {
    display: none;
}

#file-name {
    font-size: 14px;
    color: #333;
    font-weight: bold;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 200px;
}


    </style>
</head>

<body>
    <header class="">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <img src="https://ibb.co/LdhyL91g"
                    alt="Logo Concessionária GTA RP" style="height: 50px;">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                    aria-controls="navbarResponsive" aria-expanded="false" aria-label="Alternar navegação">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div style="float: left;" class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                        <li class="nav-item"><a class="nav-link" href="index.html">HOMEPAGE</a></li>
                        <a class="nav-link active" href="filter.html">NOSSO ESTOQUE</a></li>

                        <!--  <li class="nav-item"><a class="nav-link" href="contact.html">CONTATO</a></li> -->
                        <!--   <li class=""><a class="login-link" href="login.html">ENTRAR / REGISTRAR</a></li> -->
                    </ul>
                </div>
            </div>
        </nav>
    </header>



    <div class="container products">
        <h2 class="text-center mb-4">Encontre seu carro ideal</h2>

        <!-- Esta linha estava duplicada, então removi -->
        <div class="products-container" id="car-list"></div>

    </div> <!-- Fechamento correto da "container products" -->

    <!-- O script que gera os carros deve estar FORA da div principal -->
    <script>
        const carros = [
            {
                nome: "GOL G4 RALLY",
                preco: "R$ 15.750,00",
                fipe: "R$ 21.00,00",
                km: "000.410 KM",
                cambio: "Manual",
                placa: "XJR-0532",

                vendido: false,  // false, 🔴 Carro foi vendido
                imagens: ["https://media.discordapp.net/attachments/1343384117135282267/1343384133883269191/image.png?ex=67bdbc38&is=67bc6ab8&hm=45ea2a6236eed5c47d086042daaf6f884939aa5617516848acdd59174e8bdafb&=&format=webp&quality=lossless",
                    "https://media.discordapp.net/attachments/1343384117135282267/1343384214871085057/image.png?ex=67bdbc4b&is=67bc6acb&hm=acdb7ddafe68ffbe56a33e19b2e06334f7e3418d850f7d8f796d702423a71dd7&=&format=webp&quality=lossless",
                    "https://media.discordapp.net/attachments/1343384117135282267/1343384363525472256/image.png?ex=67bdbc6f&is=67bc6aef&hm=e4af10ea6a8cbfc3a8c1d76e95268d7eb76eb979fa41806049a7e9d1acefebbd&=&format=webp&quality=lossless"
                ],
                specs: [
                    "<strong>Pistão:</strong> Original",
                    "<strong>Biela:</strong> Original",
                    "<strong>Cabeçote:</strong> Original",
                    "<strong>Comando:</strong> Original",
                    "<strong>Radiador:</strong> Original",
                    "<strong>Nitro:</strong> <span style='color:red;'>Não</span>",
                    "<strong>Turbo:</strong> <span style='color:red;'>Não</span>",
                    "<strong>Radiador de Óleo:</strong> <span style='color:red;'>Não</span>",
                    "<strong>Intercooler:</strong> <span style='color:red;'>Não</span>",
                    "<strong>Câmbio:</strong> Original",
                    "<strong>Suspensão:</strong> Original",
                    "<strong>Freios:</strong> Original",
                    "<strong>Coletor ESC:</strong> Original",
                    "<strong>Coletor ADM:</strong> Original",
                    "<strong>Moral:</strong> <span style='color:green;'>0/200</span>"
                ],
                documentation: {
                    roda: "Original",
                    turbo: "Não",
                    cor: "Preto",
                    legalizado: true
                }
            },
        ];

        carros.forEach((carro, index) => {
            document.write(`
        <div class="product-item">
            <div class="product-content">
                <div class="carousel" id="carousel-${index}">
                    <button class="carousel-prev" onclick="prevImage(${index})">&#10094;</button>
                    <div class="carousel-images">
                        ${carro.imagens.map((img, i) => `<img src="${img}" class="${i === 0 ? 'active' : ''}" alt="${carro.nome}">`).join('')}
                    </div>
                    <button class="carousel-next" onclick="nextImage(${index})">&#10095;</button>
                </div>
                <div class="product-info">
                    <hr>
                    <h4>${carro.nome}</h4><h6>${carro.preco}</h6>
                    <p class="${carro.vendido ? 'legalizado' : 'nao-legalizado'}">
                        ${carro.vendido ? 'DISPONIVEL' : 'NÃO DISPONIVEL'}
                    </p>
                    <hr>
                    <p>FIPE: ${carro.fipe}</p>
                    <p>${carro.km} | ${carro.placa} | ${carro.cambio}</p>
                    
                    <button class="form-btn" data-index="${index}">FAZER UMA PROPOSTA</button>
                </div>
                <div class="specifications">
                    <h5>Especificações</h5>
                    <ul>
                        ${carro.specs.map(spec => `<li>${spec}</li>`).join('')}
                    </ul>
                </div>
                <div class="documentation">
                    <h5>Documentação</h5>
                    <p><strong>Roda:</strong> ${carro.documentation.roda}</p>
                    <p><strong>Turbo:</strong> ${carro.documentation.turbo}</p>
                    <p><strong>Cor:</strong> ${carro.documentation.cor}</p>
                    <p class="${carro.documentation.legalizado ? 'legalizado' : 'nao-legalizado'}">
                        ${carro.documentation.legalizado ? 'Legalizado' : 'Não Legalizado'}
                    </p>
                </div>
<div class="form-popup" id="form-${index}">
    <h2>FAZER UMA PROPOSTA</h2>
    <input type="hidden" id="carroImagem-${index}">
<input type="hidden" id="carroNome-${index}" name="carroNome">
<input type="hidden" id="carroPreco-${index}" name="carroPreco">
<input type="hidden" id="carroFipe-${index}" name="carroFipe">
<input type="hidden" id="carroKm-${index}" name="carroKm">
<input type="hidden" id="carroCambio-${index}" name="carroCambio">
<input type="hidden" id="carroPlaca-${index}" name="carroPlaca">


    <input type="text" id="nome-${index}" class="popup-input" placeholder="Nome In-Game">
    <input type="text" id="discord-${index}" class="popup-input" placeholder="Discord">
    <input type="text" id="celular-${index}" class="popup-input" placeholder="Celular In-Game">
    <textarea id="comentario-${index}" class="popup-textarea" placeholder="Escreva aqui a sua proposta..."></textarea>
    
<div class="upload-container">
    <label for="fotoCarro-${index}" class="upload-label">
        📸 Enviar Foto do Veículo:
    </label>
    <input type="file" id="fotoCarro-${index}" class="upload-input" accept="image/*">
    <span id="file-name-${index}" class="file-name">Nenhum arquivo escolhido</span>
</div>

    <div class="popup-btn-container">
        <button class="popup-btn submit" onclick="enviarFormulario(${index})">Enviar</button>
        <button class="popup-btn close" onclick="closeForm(${index})">Fechar</button>
    </div>
</div>


            </div>
        </div>
    `);
        });
    </script>
    </div>
    </div>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="inner-content">
                        <p2>COPYRIGHT © 2025 SHELBY AUTO ( BRASILIA RP ) SERVER 2 - DESENVOLVIDO BY <a href="#">Shelby
                                Enterprises L.L.C</a></p2>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.querySelectorAll(".upload-input").forEach(input => {
    input.addEventListener("change", function () {
        let fileName = this.files.length > 0 ? this.files[0].name : "Nenhum arquivo escolhido";
        document.getElementById(`file-name-${this.id.split("-")[1]}`).textContent = fileName;
    });
});

        document.addEventListener("DOMContentLoaded", function () {
            document.querySelectorAll(".form-btn").forEach(button => {
                button.addEventListener("click", function () {
                    let index = this.getAttribute("data-index");
                    openForm(index);
                });
            });

            // 🔹 Esconde todos os formulários no carregamento
            document.querySelectorAll(".form-popup").forEach(form => {
                form.style.display = "none";
            });
        });

        function openForm(index) {
    let form = document.getElementById(`form-${index}`);

    if (!form) {
        console.error(`❌ Erro: Formulário form-${index} não encontrado.`);
        return;
    }

    form.style.display = "flex";
    setTimeout(() => {
        form.classList.add("show"); // 🔹 Adiciona a animação ao abrir
    }, 10);

    let productItem = document.querySelectorAll(".product-item")[index];

    if (!productItem) {
        console.error("❌ Erro: O elemento .product-item não foi encontrado.");
        return;
    }

    let carRect = productItem.getBoundingClientRect();
    form.style.left = `${carRect.right + 15}px`;
    form.style.top = `${carRect.top}px`;

    // 🔹 Pegando informações completas do carro
    if (carros[index]) {
        let carro = carros[index];

        // 🛑 Atualiza os campos ocultos no formulário
        document.getElementById(`carroNome-${index}`).value = carro.nome;
        document.getElementById(`carroPreco-${index}`).value = carro.preco;
        document.getElementById(`carroFipe-${index}`).value = carro.fipe;
        document.getElementById(`carroKm-${index}`).value = carro.km;
        document.getElementById(`carroCambio-${index}`).value = carro.cambio;
        document.getElementById(`carroPlaca-${index}`).value = carro.placa;
        let campoImagem = document.getElementById(`carroImagem-${index}`);
if (campoImagem) {
    campoImagem.value = carro.imagem || "";
}
    } else {
        console.warn(`⚠️ Nenhum carro encontrado no índice ${index}`);
    }

    // 🔹 Adicionando evento ao botão de envio do formulário
    let submitButton = form.querySelector(".popup-btn.submit");
    if (submitButton) {
        submitButton.onclick = function () {
            enviarFormulario(index);
        };
    }
}

// 🔹 Função para converter imagem em Base64
function converterImagemBase64(file) {
    return new Promise((resolve, reject) => {
        let reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
    });
}

// 🔹 Função para fechar o formulário e limpar os campos
function closeForm(index) {
    let form = document.getElementById(`form-${index}`);
    if (form) {
        form.classList.remove("show"); // 🔹 Remove animação de abertura
        setTimeout(() => {
            form.style.display = "none";
        }, 300);

        // 🔹 Limpa os campos do formulário, incluindo inputs e textarea
        form.querySelectorAll("input, textarea").forEach(input => {
            if (input.type !== "hidden") { // Mantém os campos ocultos com informações do carro
                input.value = "";
            }
        });
    }
}

        // 🔹 Função para enviar o formulário
        function enviarFormulario(index) {
            let form = document.getElementById(`form-${index}`);

            if (!form) {
                console.error(`❌ Erro: Formulário form-${index} não encontrado.`);
                return;
            }

            // 🔹 Simula envio de formulário (aqui você pode adicionar requisição para backend ou Discord Webhook)
            console.log("✅ Formulário enviado com sucesso!");

            // 🔹 Fecha e limpa o formulário após o envio
            closeForm(index);
        }


        // Estilos CSS corrigidos
        document.head.insertAdjacentHTML("beforeend", `
<style>

/* 🔹 Melhorando a posição do formulário */


/* 🔹 Esconde o formulário ao carregar a página */
.form-popup {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: absolute;
    left: 105%; /* Mantém o formulário ao lado do carro */
    margin-left: -110px;
    margin-top: -170px;
background: linear-gradient(269deg, #efeded, #efeded);
    width: 400px;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.3);
    text-align: center;
    animation: fadeIn 0.3s ease-in-out;
    border: 2px solid #ddd;
    opacity: 0; /* 🔹 Inicia invisível */
    transform: scale(0.9); /* 🔹 Efeito de zoom */
    transition: all 0.3s ease-in-out;
}

/* 🔹 Quando for exibido, faz a animação */
.form-popup.show {
    display: flex;
    opacity: 1;
    transform: scale(1);
}

/* 🔹 Mantém o título azul gradiente */
.form-popup h2 {
               background: linear-gradient(269deg, #efeded, #efeded);
    color: #000000;
    font-size: 18px;
    padding: 15px;
    border-radius: 10px 10px 0 0;
    margin: -25px -25px 20px -25px;
    text-align: center;
    width: calc(100% + 50px);
}

/* 🔹 Inputs */
.popup-input {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 14px;
}

/* 🔹 Botões lado a lado */
.popup-btn-container {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin-top: 15px;
}

/* 🔹 Caixa de Comentário Opcional */
.popup-textarea {
    width: 100%;
    height: 100px;
    padding: 12px;
    margin: 8px 0;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 14px;
    resize: none;
}

/* 🔹 Botão Enviar */
.popup-btn.submit {
    flex: 1;
    background: #ffffff;
    color: #141313;
    padding: 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 16px;
    transition: all 0.3s ease-in-out;
    width: 170px;
}

.popup-btn.submit:hover {
    background: #138496;
}

/* 🔹 Botão Fechar */
.popup-btn.close {
    flex: 1;
    background: #000000c7;
    color: white;
    padding: 12px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    font-size: 16px;
    width: 170px;
}


`);

    </script>

    <script>

function enviarFormulario(index) {
    let nomeCarro = document.getElementById(`carroNome-${index}`).value;
    let carroPreco = document.getElementById(`carroPreco-${index}`).value;
    let carroFipe = document.getElementById(`carroFipe-${index}`).value;
    let carroKm = document.getElementById(`carroKm-${index}`).value;
    let carroCambio = document.getElementById(`carroCambio-${index}`).value;
    let carroPlaca = document.getElementById(`carroPlaca-${index}`).value;
    let nome = document.getElementById(`nome-${index}`).value;
    let discord = document.getElementById(`discord-${index}`).value;
    let celular = document.getElementById(`celular-${index}`).value;
    let comentario = document.getElementById(`comentario-${index}`).value || "Nenhum comentário";
    let fotoInput = document.getElementById(`fotoCarro-${index}`);
    let foto = fotoInput && fotoInput.files.length > 0 ? fotoInput.files[0] : null;

    if (!nome || !discord || !celular) {
        alert("Por favor, preencha todos os campos obrigatórios.");
        return;
    }

    function enviarParaDiscord(fotoURL = null) {
        let mensagem = {
            username: "Novo Formulário",
            avatar_url: "https://img.freepik.com/psd-gratuitas/icone-do-whatsapp-isolado-ilustracao-de-renderizacao-3d_47987-9785.jpg",
            content: `📩 **SAQ > ( Entrar Em Contato )**\n\n
### 🔹 **Informações do Veículo:**\n
🚗 **Carro:** \`${nomeCarro}\`\n
💰 **Preço:** \`${carroPreco}\`\n
📊 **FIPE:** \`${carroFipe}\`\n
🛣️ **KM:** \`${carroKm}\`\n
⚙ **Câmbio:** \`${carroCambio}\`\n
🔢 **Placa:** \`${carroPlaca}\`\n

### 🔹 **Dados do Interessado:**\n
👤 **Nome:** \`${nome}\`\n
🎧 **Discord:** \`${discord}\`\n
📱 **Celular In-Game:** \`${celular}\`\n
💬 **Comentário:** \`${comentario}\`\n
${fotoURL ? `🖼️ **Foto do Veículo:** [Clique para ver](${fotoURL})\n` : ""}
`
        };

        fetch("https://discordapp.com/api/webhooks/1343741774644117534/zoYLMvqda0hJRJNjDtBzE_3DNN9-EY651LjHIdpNSCygGjHE-Xjxln0uxjBSIbq8RiiZ", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(mensagem)
        }).then(response => {
            if (response.ok) {
                alert("✅ Formulário enviado com sucesso!");
                closeForm(index); // Fecha o formulário após envio
            } else {
                alert("❌ Erro ao enviar formulário.");
            }
        }).catch(error => {
            alert("❌ Erro de conexão: " + error.message);
        });
    }

    // 🔹 Se houver imagem, faz upload antes de enviar
    if (foto) {
        let formData = new FormData();
        formData.append("image", foto);

        fetch("https://api.imgbb.com/1/upload?key=a85bd55edbbb971f0b7d546e0830327b", {
            method: "POST",
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                enviarParaDiscord(data.data.url); // Envia para o Discord com o link da imagem
            } else {
                console.error("Erro ao enviar imagem.");
                enviarParaDiscord(null); // Envia sem imagem
            }
        })
        .catch(error => {
            console.error("Erro ao enviar imagem:", error);
            enviarParaDiscord(null); // Envia sem imagem
        });
    } else {
        enviarParaDiscord(null); // Se não houver imagem, apenas envia o formulário
    }
}
</script>
    <script>
        function prevImage(index) {
            let images = document.querySelectorAll(`#carousel-${index} .carousel-images img`);
            let activeIndex = Array.from(images).findIndex(img => img.classList.contains("active"));
            images[activeIndex].classList.remove("active");
            let newIndex = (activeIndex - 1 + images.length) % images.length;
            images[newIndex].classList.add("active");
        }

        function nextImage(index) {
            let images = document.querySelectorAll(`#carousel-${index} .carousel-images img`);
            let activeIndex = Array.from(images).findIndex(img => img.classList.contains("active"));
            images[activeIndex].classList.remove("active");
            let newIndex = (activeIndex + 1) % images.length;
            images[newIndex].classList.add("active");
        }

    </script>
</body>

</html>